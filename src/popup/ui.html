<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NewSync Settings</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet">
    <link href="../lib/material3.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="ui.css">
    <!-- Assuming polyfill.js provides browser/chrome namespace and storage helpers -->
    <script src="../lib/polyfill.js" defer></script>
</head>
<body>
    <div class="container">
        <header class="app-header">
            <span class="material-symbols-outlined header-icon">Lyrics</span>
            <h1>NewSync Settings</h1>
        </header>

        <nav class="tabs">
            <button class="tab active" data-tab="general-tab">
                <span class="material-symbols-outlined tab-icon">tune</span>General
            </button>
            <button class="tab" data-tab="appearance-tab">
                <span class="material-symbols-outlined tab-icon">display_settings</span>Display
            </button>
            <button class="tab" data-tab="advanced-tab">
                <span class="material-symbols-outlined tab-icon">settings</span>Advanced
            </button>
        </nav>

        <main>
            <!-- General Tab Content -->
            <div class="tab-content active" id="general-tab">
                <section class="settings-section">
                    <h2 class="section-title">
                        <span class="material-symbols-outlined section-icon">toggle_on</span>Core Features
                    </h2>
                    <div class="setting-item">
                        <label for="lyEnabled" class="setting-label">Enable NewSync</label>
                        <div class="m3-switch" role="switch" aria-labelledby="lyEnabled">
                            <input type="checkbox" id="lyEnabled" class="m3-switch-input">
                            <span class="m3-switch-track"></span>
                            <span class="m3-switch-thumb-container"><span class="m3-switch-thumb"></span></span>
                        </div>
                    </div>
                </section>

                <section class="settings-section">
                    <h2 class="section-title">
                        <span class="material-symbols-outlined section-icon">cloud_download</span>Data Sources
                    </h2>
                    <div class="setting-item">
                        <label for="lyricsProvider" class="setting-label">Primary Lyrics Provider</label>
                        <div class="m3-select-wrapper">
                            <select id="lyricsProvider" class="m3-select">
                                <option value="kpoe">Lyrics+ (KPoe)</option>
                                <option value="customKpoe">Custom KPoe Server</option>
                                <option value="lrclib">LRCLIB</option>
                            </select>
                            <span class="material-symbols-outlined select-arrow">expand_more</span>
                        </div>
                    </div>
                    <div class="setting-item">
                        <label for="sponsorblock" class="setting-label">Integrate SponsorBlock</label>
                        <div class="m3-switch" role="switch" aria-labelledby="sponsorblock">
                            <input type="checkbox" id="sponsorblock" class="m3-switch-input">
                            <span class="m3-switch-track"></span>
                            <span class="m3-switch-thumb-container"><span class="m3-switch-thumb"></span></span>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Appearance Tab Content -->
            <div class="tab-content" id="appearance-tab">
                <section class="settings-section">
                    <h2 class="section-title">
                        <span class="material-symbols-outlined section-icon">palette</span>Appearance
                    </h2>
                    <div class="setting-item">
                        <label for="lightweight" class="setting-label">Lightweight Mode</label>
                        <div class="m3-switch" role="switch" aria-labelledby="lightweight">
                            <input type="checkbox" id="lightweight" class="m3-switch-input">
                            <span class="m3-switch-track"></span>
                            <span class="m3-switch-thumb-container"><span class="m3-switch-thumb"></span></span>
                        </div>
                    </div>
                    <div class="setting-item">
                        <label for="wordByWord" class="setting-label">Word-by-Word Highlighting</label>
                        <div class="m3-switch" role="switch" aria-labelledby="wordByWord">
                            <input type="checkbox" id="wordByWord" class="m3-switch-input">
                            <span class="m3-switch-track"></span>
                            <span class="m3-switch-thumb-container"><span class="m3-switch-thumb"></span></span>
                        </div>
                    </div>
                    <div class="setting-item">
                        <label for="blurInactive" class="setting-label">Blur Inactive Lyrics</label>
                        <div class="m3-switch" role="switch" aria-labelledby="blurInactive">
                            <input type="checkbox" id="blurInactive" class="m3-switch-input">
                            <span class="m3-switch-track"></span>
                            <span class="m3-switch-thumb-container"><span class="m3-switch-thumb"></span></span>
                        </div>
                    </div>
                    <div class="setting-item">
                        <label for="dynamicBackground" class="setting-label">Enable Dynamic Background (Player View)</label>
                        <div class="m3-switch" role="switch" aria-labelledby="dynamicBackground">
                            <input type="checkbox" id="dynamicBackground" class="m3-switch-input">
                            <span class="m3-switch-track"></span>
                            <span class="m3-switch-thumb-container"><span class="m3-switch-thumb"></span></span>
                        </div>
                    </div>
                    <div class="setting-item">
                        <label for="hideOffscreen" class="setting-label">Hide Off-Screen Lyrics Lines</label>
                        <div class="m3-switch" role="switch" aria-labelledby="hideOffscreen">
                            <input type="checkbox" id="hideOffscreen" class="m3-switch-input">
                            <span class="m3-switch-track"></span>
                            <span class="m3-switch-thumb-container"><span class="m3-switch-thumb"></span></span>
                        </div>
                    </div>
                </section>
                
                <section class="settings-section">
                    <h2 class="section-title">
                        <span class="material-symbols-outlined section-icon">g_translate</span>AI Translation
                    </h2>
                    <div class="setting-item">
                        <label for="overrideGeminiPrompt" class="setting-label">Override Gemini AI Prompt</label>
                        <div class="m3-switch" role="switch" aria-labelledby="overrideGeminiPrompt">
                            <input type="checkbox" id="overrideGeminiPrompt" class="m3-switch-input">
                            <span class="m3-switch-track"></span>
                            <span class="m3-switch-thumb-container"><span class="m3-switch-thumb"></span></span>
                        </div>
                    </div>
                    <div class="setting-item" id="customGeminiPromptGroup" style="display: none;">
                        <label for="customGeminiPrompt" class="setting-label">Custom Gemini AI Prompt</label>
                        <textarea id="customGeminiPrompt" class="m3-textfield" placeholder="Enter custom prompt for Gemini AI translation..." rows="3"></textarea>
                        <p class="setting-description">Use {targetLang} for target language placeholder</p>
                    </div>
                </section>
            </div>

            <!-- Advanced Tab Content -->
            <div class="tab-content" id="advanced-tab">
                <section class="settings-section">
                    <h2 class="section-title">
                        <span class="material-symbols-outlined section-icon">database</span>Data Management
                    </h2>
                    <div class="cache-info">
                        <p>Storage Used: <span class="cache-size-value">0.00 MB</span></p>
                        <p>Lyrics Cached: <span class="cache-count-value">0</span></p>
                    </div>
                    <div class="cache-controls">
                        <button class="m3-button m3-button-filled m3-button-error" id="clearCache">
                            <span class="material-symbols-outlined button-icon">delete</span>Clear Cache
                        </button>
                        <button class="m3-button m3-button-tonal" id="refreshCache">
                            <span class="material-symbols-outlined button-icon">sync</span>Refresh
                        </button>
                    </div>
                </section>
                

            </div>
        </main>

        <footer class="app-footer">
            <button id="reloadExtension" class="m3-button m3-button-text">
                <span class="material-symbols-outlined button-icon">refresh</span>Reload Extension
            </button>
            <a href="../settings/index.html" target="_blank" class="m3-button m3-button-text">
                <span class="material-symbols-outlined button-icon">settings_applications</span>More Settings
            </a>
        </footer>
    </div>

    <div class="m3-snackbar" id="statusSnackbar">
        <span class="snackbar-text"></span>
    </div>

    <script src="ui.js" defer></script>
</body>
</html>